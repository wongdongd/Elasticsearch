## 索引

> 索引是具有某些相似特征的文档的集合。举个栗子，可以为顾客数据创建索引，为产品目录创建另一个索引，再为订单数据创建一个索引。索引是用名字来区分的，索引必须都是小写字母，当对索引中的文档进行索引、搜索、更新和删除操作时，该名字可以被索引引用。

在一个集群中，可以创建任意数量的索引。

## type
> 在一个index中，可以定义一个或者多个type。type是索引的逻辑类别/分区，其语义完全取决于你。通常，是为一组具有公共字段的文档来定义一个type。举个栗子，假设你运行了一个博客平台，你可能会为用户数据定义一个type，为blog数据定义一个type，为评论数据定义有一个type。

## 文档

> 文档是可以被索引的基本信息单位。举个栗子，可以为一个顾客创建一个文档，为一个产品创建一个文档，为一个订单创建一个文档。文档是JSON数据格式

> 在一个index/type中，可以存储任意数量的文档。请注意，尽管文档实际上位于索引中，但实际上必须将文档(编入索引)/(分配给索引内的类型)。

## shards和replicas

> 索引可能要存储大量的数据，这些数据可能会超过单个节点的硬件限制。例如，十亿个文档的单个索引占用了1TB的磁盘空间，可能不适合单个节点的磁盘，或者可能太慢而无法单独满足来自单个节点的搜索请求。

> 为了解决此问题，Elasticsearch提供了将索引细分为多个分片的功能。创建索引的时候，可以指定需要的分片数量。每个分片本身就是一个功能齐全且独立的“索引”，可以托管在群集中的任何节点上。

shards的重要性：

* 水平分割/缩放数据
 * 它允许您跨碎片（可能在多个节点上）分布和并行化操作，从而提高性能/吞吐量

> 分片如何分布以及其文档如何聚合回到搜索请求中的机制完全由Elasticsearch管理，并且对用户透明

> 在随时可能发生故障的网络/云环境中，，强烈建议您使用故障转移机制，以防碎片/节点因某种原因脱机或消失。为此，Elasticsearch允许您将索引分片的一个或多个副本制作为所谓的副本分片（简称副本）。

replications的重要性：

* 如果分片/节点发生故障，它可提供高可用性。因此，请务必注意，副本分片永远不会与从其复制的原始/主分片在同一节点上分配
* 由于可以并行在所有副本上执行搜索，因此可以扩展搜索量/吞吐量

> 总结来说，每个索引可以被分成多个分片，索引也可以有0个或者多个副本。复制后，每个索引将有主分片(被复制的原始分片)和副本分片(主分片的副本)。在创建索引的时候可以指定分片和副本数量。当索引创建后，可以随时修改副本数量，但不能修改分片的数量。

> 默认情况下，Elasticsearch中的每个索引都分配5个主分片和1个副本，这意味着如果集群中至少有两个节点，则索引将具有5个主分片和5个副本分片(1个完整的副本)，总共每个索引10个分片。